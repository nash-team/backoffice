<div class="page cover {{ 'theme-' + (page.data.ribbon_theme|default('licornes')|lower) }}">
  {% if page.data.show_ribbon|default(true) %}
  <div class="title-ribbon" role="banner" aria-label="Ribbon de coloriage">
    <svg class="ribbon-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
      <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
    </svg>
    <span class="ribbon-title">{{ page.data.ribbon_title|default("Cahier de coloriage") }}</span>
  </div>
  {% endif %}
</div>

<style>
  @page { size: 8.5in 8.5in; margin: 0; }

  :root {
    /* Ribbon configuration variables - WeasyPrint compatible */
    --ribbon-width: 350px; /* 44ch approximation */
    --ribbon-pad-vertical: 0.75rem;
    --ribbon-pad-horizontal: 1.2rem;
    --ribbon-alpha: 0.75;
    --ribbon-bg: #8B5CF6;
    --ribbon-text-color: #FFFFFF;
    --ribbon-icon-size: 20px;
    --ribbon-font-size: 1rem;

    /* Theme variables (default: basic purple) */
    --theme-primary: #8B5CF6;
    --theme-secondary: #A78BFA;
    --theme-accent: #DDD6FE;
  }

  /* Theme classes - Embedded for WeasyPrint compatibility */
  .theme-licornes {
    --ribbon-bg: #FF69B4;
    --ribbon-text-color: #FFFFFF;
    --theme-primary: #FF69B4;
    --theme-secondary: #DA70D6;
    --theme-accent: #FFB6C1;
  }

  .theme-dinosaures {
    --ribbon-bg: #228B22;
    --ribbon-text-color: #FFFFFF;
    --theme-primary: #228B22;
    --theme-secondary: #32CD32;
    --theme-accent: #90EE90;
  }

  .theme-pirates {
    --ribbon-bg: #1E3A8A;
    --ribbon-text-color: #FFD700;
    --theme-primary: #1E3A8A;
    --theme-secondary: #3B82F6;
    --theme-accent: #FFD700;
  }

  .page.cover {
    width: 8.5in;
    height: 8.5in;
    background: url("{{ page.data.image_url }}") center/cover no-repeat;
    background-size: cover;
    position: relative;
    margin: 0;
    padding: 0;
  }

  .title-ribbon {
    position: absolute;
    top: 18px;
    left: 18px;
    max-width: 350px;
    width: auto;
    background: rgba(139, 92, 246, 0.75);
    padding: 0.75rem 1.2rem;
    border-radius: 10px;
    display: block;
    border: 1px solid rgba(255, 255, 255, 0.2);
    z-index: 10;
  }

  /* Theme-specific backgrounds for WeasyPrint compatibility */
  .theme-licornes .title-ribbon {
    background: rgba(255, 105, 180, 0.75);
  }

  .theme-dinosaures .title-ribbon {
    background: rgba(34, 139, 34, 0.75);
  }

  .theme-pirates .title-ribbon {
    background: rgba(30, 58, 138, 0.75);
  }

  .ribbon-icon {
    width: 20px;
    height: 20px;
    color: #FFFFFF;
    display: inline-block;
    vertical-align: middle;
    margin-right: 0.5rem;
  }

  .ribbon-title {
    font-family: "Arial", sans-serif;
    font-size: 1rem;
    font-weight: 600;
    color: #FFFFFF;
    line-height: 1.2;
    display: inline-block;
    vertical-align: middle;
    white-space: nowrap;
  }

  /* Theme-specific text colors for WeasyPrint */
  .theme-pirates .ribbon-icon,
  .theme-pirates .ribbon-title {
    color: #FFD700;
  }

</style>
