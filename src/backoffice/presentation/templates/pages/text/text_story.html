<div class="page text {{ page.layout }} {% if page.page_break_before %}page-break-before{% endif %} {% if page.page_break_after %}page-break-after{% endif %}">
    <div class="story-section" id="{{ page.id }}">
        {% if page.title %}
        <header class="story-header">
            <h1 class="story-title">
                {% if page.data.chapter_number %}
                <span class="story-number">{{ page.data.chapter_number }}</span>
                {% endif %}
                {{ page.title|safe }}
            </h1>
        </header>
        {% endif %}

        <div class="story-content">
            {{ page.data.content_html|safe }}
        </div>
    </div>
</div>

<style>
    .story-section {
        margin-bottom: 2rem;
        font-family: "Georgia", "Times New Roman", serif;
    }

    .story-header {
        margin-bottom: 2rem;
        text-align: center;
        border-bottom: 2px solid #e67e22;
        padding-bottom: 1rem;
    }

    .story-title {
        font-size: 1.8rem;
        color: #d35400;
        margin: 0;
        line-height: 1.3;
        font-weight: 600;
    }

    .story-number {
        display: block;
        font-size: 0.9rem;
        color: #f39c12;
        font-weight: normal;
        margin-bottom: 0.5rem;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .story-content {
        font-size: 12pt;
        line-height: 1.7;
        color: #2c3e50;
    }

    .story-content h2 {
        font-size: 1.4rem;
        color: #e67e22;
        margin-top: 2rem;
        margin-bottom: 1rem;
        border-left: 4px solid #f39c12;
        padding-left: 1rem;
    }

    .story-content h3 {
        font-size: 1.2rem;
        color: #d35400;
        margin-top: 1.5rem;
        margin-bottom: 0.8rem;
    }

    .story-content p {
        margin-bottom: 1.2rem;
        text-align: justify;
        hyphens: auto;
        text-indent: 1.5rem; /* Indentation pour les histoires */
    }

    .story-content p:first-of-type {
        text-indent: 0; /* Pas d'indentation pour le premier paragraphe */
    }

    .story-content ul, .story-content ol {
        margin-bottom: 1rem;
        padding-left: 2rem;
    }

    .story-content li {
        margin-bottom: 0.5rem;
    }

    .story-content blockquote {
        border-left: 4px solid #f39c12;
        margin: 1.5rem 0;
        padding: 1rem;
        color: #555;
        font-style: italic;
        background: #fdf6e3;
        border-radius: 4px;
    }

    .story-content em {
        color: #e67e22;
        font-style: italic;
    }

    .story-content strong {
        color: #d35400;
        font-weight: bold;
    }

    /* Styles spéciaux pour les dialogues */
    .story-content p:has(em:first-child) {
        margin-left: 1rem;
        border-left: 2px solid #f39c12;
        padding-left: 1rem;
        background: rgba(243, 156, 18, 0.05);
    }

    /* Éviter les coupures malheureuses */
    .story-content h2,
    .story-content h3 {
        page-break-after: avoid;
    }

    .story-content p {
        orphans: 3;
        widows: 3;
    }

    /* Style pour les transitions de scène */
    .story-content hr {
        border: none;
        text-align: center;
        margin: 2rem 0;
    }

    .story-content hr::after {
        content: "✦ ✦ ✦";
        color: #f39c12;
        font-size: 1.2rem;
        letter-spacing: 1rem;
    }
</style>